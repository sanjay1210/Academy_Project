<!DOCTYPE html>
<html>
<head>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
	integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
	integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
	crossorigin="anonymous"></script>


<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


<script src="javascript.js"></script>
<script src="my.js"></script>
</head>


<body onload="getAllStudents();">
	<center>
		<h1>ASSOCIATE MARKS</h1>
	</center>

	<br />
	<br />

	<!-- Button trigger modal -->
	<button type="button" class="btn btn-primary" data-bs-toggle="modal"
		data-bs-target="#exampleModal">INSERT</button>
	<button type="button" class="btn btn-primary" data-bs-toggle="modal"
		data-bs-target="#exampleModal2" onclick="getAllStudents();">UPDATE</button>
	<button type="button" class="btn btn-primary" data-bs-toggle="modal"
		data-bs-target="#exampleModal3" onclick="getAllStudents();">DELETE</button>
	<button type="button" class="btn btn-primary" data-bs-toggle="modal"
		data-bs-target="#exampleModal4">OPERATION</button>

	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">INSERT DATA</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="row g-3 align-items-center">
						<div class="col-3">
							<label for="insertSubjectName" class="col-form-label">NAME</label>
						</div>
						<div class="col-9">
							<input type="text" id="insertSubjectName" class="form-control">
						</div>
						<div class="col-3">
							<label for="insertSub1" class="col-form-label">SUBJECT 1</label>
						</div>
						<div class="col-9">
							<input type="number" id="insertSub1" class="form-control">
						</div>
						<div class="col-3">
							<label for="insertSub2" class="col-form-label">SUBJECT 2</label>
						</div>
						<div class="col-9">
							<input type="number" id="insertSub2" class="form-control">
						</div>
						<div class="col-3">
							<label for="insertSub3" class="col-form-label">SUBJECT 3</label>
						</div>
						<div class="col-9">
							<input type="number" id="insertSub3" class="form-control"
								validate required>
						</div>
						<!--<div class="col-3">
                    <label for="avg" class="col-form-label">AVERAGE</label>
                  </div>
                  <div class="col-9">
                    <input type="number" id="avg" class="form-control" readonly>
                  </div>
                  <div class="col-3">
                    <label for="res" class="col-form-label">RESULT</label>
                  </div>
                  <div class="col-9">
                    <input type="number" id="res" class="form-control" readonly>
                  </div>-->


					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-bs-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-primary"
						data-bs-dismiss="modal" onclick="createStudent();">Save
						changes</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal2 -->
	<div class="modal fade" id="exampleModal2" tabindex="-1"
		aria-labelledby="exampleModalLabel2" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel2">UPDATE</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">

					<div class="row g-3 align-items-center">
						<div class="col-3">
							<label for="name" class="col-form-label">NAME</label>
						</div>
						<div class="col-9" id="updateStudentNamesList"
							onchange="fetchStudentDetails()">
							<select class="form-control">
								<option value="none" selected disabled>Select an Option</option>
								<option value='1'>1</option>
							</select>
						</div>
						<div id="update" hidden>
							<div class="col-3">
								<label for="updatedStudentName" class="col-form-label">NAME
									:</label>
							</div>
							<div class="col-12">
								<input type="text" id="updatedStudentName" class="form-control">
							</div>
							<div class="col-3">
								<label for="updatedSub1Marks" class="col-form-label">SUBJECT
									1</label>
							</div>
							<div class="col-12">
								<input type="number" id="updatedSub1Marks" class="form-control">
							</div>
							<div class="col-3">
								<label for="updatedSub2Marks" class="col-form-label">SUBJECT
									2</label>
							</div>
							<div class="col-12">
								<input type="number" id="updatedSub2Marks" class="form-control">
							</div>
							<div class="col-3">
								<label for="updatedSub3Marks" class="col-form-label">SUBJECT
									3</label>
							</div>
							<div class="col-12">
								<input type="number" id="updatedSub3Marks" class="form-control">
							</div>
						</div>

					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary"
							data-bs-dismiss="modal" onclick="updateStudentDetails();">Save
							changes</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal3 -->
	<div class="modal fade" id="exampleModal3" tabindex="-1"
		aria-labelledby="exampleModalLabel3" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel3">DELETE</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="row g-3 align-items-center">
						<div class="col-3">
							<label for="name" class="col-form-label">NAME</label>
						</div>
						<div class="col-9" id="deleteStudentNamesList">
							<select id="mySelect" class="form-control">
								<option value="none" selected disabled hidden>Select an
									Option</option>
							</select>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-bs-dismiss="modal">Close</button>
					<button type="button" data-bs-dismiss="modal"
						class="btn btn-danger" onclick="deleteStudent();">Delete
						Student Details</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal4-->
	<div class="modal fade" id="exampleModal4" tabindex="-1"
		aria-labelledby="exampleModalLabel4" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel4">OPERATIONS</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">

					<div class="row g-3 align-items-center">
						<div class="col-3">
							<label for="operation" class="col-form-label">OPERATION</label>
						</div>
						<div class="col-9">
							<select id="operation" onchange="op()" class="form-control">
								<option value="none" selected disabled hidden>Select an
									Option</option>
								<option value="min">MIN</option>
								<option value="max">MAX</option>
								<option value="avg">AVERAGE</option>
								<option value="lt">LESSER THAN</option>
								<option value="gt">GREATER THAN</option>
								<option value="top">TOP 5</option>
								<option value="bot">BOTTOM 5</option>
							</select>
						</div>
						<div class="col-3">
							<label for="col_name" class="col-form-label">COLUMN</label>
						</div>
						<div class="col-9">
							<select id="col_name" class="form-control">
								<option value="none" selected disabled hidden>Select an
									Option</option>
								<option value='subject1'>SUBJECT 1</option>
								<option value='subject2'>SUBJECT 2</option>
								<option value='subject3'>SUBJECT 3</option>
								<option value='avg'>AVERAGE</option>

							</select>
						</div>
						<div id="extra" hidden>
							<div class="col-3">
								<label for="val" class="col-form-label">ENTER VALUE</label>
							</div>
							<div class="col-12">
								<input type="text" id="val" class="form-control">
							</div>
						</div>
					</div>
					<div id="tab" hidden>
						<table class="table">
							<thead>
								<tr>
									<th scope="col">id</th>
									<th scope="col">NAME</th>
									<th scope="col" id="column3"></th>

								</tr>
							</thead>

						</table>
					</div>

				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-bs-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-primary" onclick="table()">Show</button>
				</div>
			</div>
		</div>
	</div>

	<br />
	<br />
	<div id="records_table">
		<table class="table">
			<thead>
				<tr>
					<th scope="col">id</th>
					<th scope="col">NAME</th>
					<th scope="col">SUBJECT 1</th>
					<th scope="col">SUBJECT 2</th>
					<th scope="col">SUBJECT 3</th>
					<th scope="col">AVERAGE</th>
					<th scope="col">RESULT</th>
				</tr>
			</thead>

		</table>

	</div>

	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
		integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
		crossorigin="anonymous">
		
	</script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
		integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
		crossorigin="anonymous"></script>
	<script type="text/javascript">
		function downloadCSV(csv, filename) {
			var csvFile;
			var downloadLink;
			csvFile = new Blob([ csv ], {
				type : "text/csv"
			});
			downloadLink = document.createElement("a");
			downloadLink.download = filename;
			downloadLink.href = window.URL.createObjectURL(csvFile);
			downloadLink.style.display = "none";
			document.body.appendChild(downloadLink);
			downloadLink.click();
		}

		function exportTableToCSV(filename) {
			var csv = [];
			var rows = document.querySelectorAll("#records_table tr");
			for (var i = 0; i < rows.length; i++) {
				var row = [], cols = rows[i].querySelectorAll("td,th");
				for (var j = 0; j < cols.length; j++)
					row.push(cols[j].innerText);
				csv.push(row.join(","));
			}
			downloadCSV(csv.join("\n"), filename);
		}
	</script>
	<button onclick="exportTableToCSV('data.csv')">Export Data To
		CSV File</button>
</body>
</html>
